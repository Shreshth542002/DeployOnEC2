<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>My Form</title>
</head>

<body>
    <form id="my-form" onsubmit="getInputValue()">
        <label for="name">Name:</label>
        <input type="text" id="name">
        <br>
        <button type="submit" onclick="AddToList()">Submit</button>
        <button onclick="DeleteFromList()">Delete</button>
        <!-- <button onclick="updateUser()">Update</button> -->
    </form>

    <div id="result"></div>
</body>
    <script>
            fetch('http://13.126.67.127:3000/users')
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                })
                .catch(error => {
                    console.error(error);
                });
            async function AddToList(){
                const data = document.getElementById("name").value;
                const Name = {'name' : data};
    
                await fetch('http://13.126.67.127:3000/users', {
                    method: 'POST',
                    headers: {
                        'Access-Control-Allow-Origin': '*',
                        'Content-Type': 'application/json',
                        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE'
                    },
                    body: JSON.stringify(Name)
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                    })
            }
            async function DeleteFromList() {
                try{
                    const response = await fetch('http://13.126.67.127:3000/users/', {
                    method: 'DELETE',
                    headers: {
                        'Access-Control-Allow-Origin': '*',
                        'Content-Type': 'application/json',
                        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE'
                    },
                    body: JSON.stringify({ id: 1 })
                })
                    const data = await response.json();
                    console.log(data);
                    }
                catch (error) {
                    console.error(error);
                }
                }
            // async function updateUser(userId, userData) {
            //         try {
            //             const response = await fetch(`http://localhost:3000/users/${userId}`, {
            //                 method: 'PUT',
            //                 headers: {
            //                     'Content-Type': 'application/json'
            //                 },
            //                 body: JSON.stringify(userData)
            //             });

            //             const data = await response.json();
            //             console.log(data);
            //         } catch (error) {
            //             console.error(error);
            //         }
            //     }

    </script>

</html>